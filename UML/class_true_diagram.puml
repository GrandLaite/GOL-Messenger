@startuml class_true

class User {
    - id: int
    - username: string
    - email: string
    - passwordHash: string
    - isPremium: bool
    + register()
    + login()
    + updateProfile()
}

class Message {
    - id: int
    - content: string
    - createdAt: DateTime
    + send()
    + edit()
    + delete()
}

class ChatRoom {
    - id: int
    - name: string
    - createdAt: DateTime
    + addUser(user: User)
    + removeUser(user: User)
}

class Attachment {
    - id: int
    - filePath: string
    - fileType: string
    + upload()
    + download()
}

class Notification {
    - id: int
    - content: string
    - sentAt: DateTime
    + sendToUser(user: User)
}

class AuthService {
    + authenticate(username: string, password: string): bool
    + generateToken(user: User): string
    + hashPassword(password: string): string
    + verifyPassword(password: string, hash: string): bool
}

class MessageService {
    + createMessage(content: string, user: User)
    + getMessages(chatRoom: ChatRoom)
}

class StorageService {
    + storeFile(attachment: Attachment)
    + retrieveFile(attachmentId: int)
}

class Database {
    + connect()
    + query(sql: string)
    + close()
}

User --> Message : "создаёт"
Message --> Attachment : "содержит"
User --> ChatRoom : "участвует в"
ChatRoom --> Message : "содержит"
User --> Notification : "получает"
AuthService --> User : "аутентифицирует"
MessageService --> Message : "управляет"
StorageService --> Attachment : "обрабатывает"
Database ..> User : "хранит"
Database ..> Message : "хранит"

@enduml
